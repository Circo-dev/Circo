<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Infoton Optimization · Circo</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Circo logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Circo</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introducing Circo</a></li><li><a class="tocitem" href="../install/">Installation</a></li><li><a class="tocitem" href="../showcase/">Showcase</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li class="is-active"><a class="tocitem" href>Infoton Optimization</a></li><li><a class="tocitem" href="../plugindev/">Plugin development</a></li><li><a class="tocitem" href="../reference/">Reference</a></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Infoton Optimization</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Infoton Optimization</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Circo-dev/Circo/blob/master/docs/src/infotons.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Infoton-Optimization"><a class="docs-heading-anchor" href="#Infoton-Optimization">Infoton Optimization</a><a id="Infoton-Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Infoton-Optimization" title="Permalink"></a></h1><h3 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h3><p>An old issue of distributed systems comes from the layered cost&amp;latency structure of communication: Networks are slow and bandwidth-limited, whereas inter-thread communication is much faster, but still slow compared to in-thread data passing. Thus communication is often the performance bottleneck that limits scalability and needs to be optimized.</p><p>Infoton optimization is a physics-inspired model to minimize communication in message-passing distributed systems. It is essentially a decentralized, scalable version of force-directed graph drawing, aka &quot;spring layout&quot; <sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>.</p><h3 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h3><p>Infoton optimization is executed in a &quot;3D Euclidean&quot; space, where actors<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup> and schedulers (threads that execute actor code) are embedded. The central idea is that actors move close to their communication partners in the space, while distance between them approximates communication costs. This way the communication cost is minimized.</p><h4 id="To-move-communicating-actors-close-to-each-other:"><a class="docs-heading-anchor" href="#To-move-communicating-actors-close-to-each-other:">To move communicating actors close to each other:</a><a id="To-move-communicating-actors-close-to-each-other:-1"></a><a class="docs-heading-anchor-permalink" href="#To-move-communicating-actors-close-to-each-other:" title="Permalink"></a></h4><p>B1. A so-called infoton, a force-carrying particle is attached to every message passed between actors. It is a small structure that holds the position of the source actor and a scalar &quot;energy&quot;.</p><p>B2. When the message arrives at its destination actor, the infoton that is attached to it acts on that actor, pulling it towards the source of the message.</p><p>This is the base of infoton optimization. Now, this alone would result in all the actors concentrating around a single point, so we need at least one another force to spread the actors in the segment of the space which is &quot;covered&quot; with schedulers. For this:</p><h4 id="To-approximate-communication-overhead-with-actor-distance:"><a class="docs-heading-anchor" href="#To-approximate-communication-overhead-with-actor-distance:">To approximate communication overhead with actor distance:</a><a id="To-approximate-communication-overhead-with-actor-distance:-1"></a><a class="docs-heading-anchor-permalink" href="#To-approximate-communication-overhead-with-actor-distance:" title="Permalink"></a></h4><p>E1. Schedulers are also embedded in the space, in a way that their distance represents communication overhead between them. This can be done either by static positioning or the use of network coordinates.</p><p>E2. Actors are migrated to the nearest scheduler.</p><p>E3. When a message arrives, the scheduler that executes the target actor creates a second infoton. The source of this &quot;scheduler infoton&quot; is the scheduler itself.</p><p>E4. This infoton either pulls or pushes the actor toward or away from the scheduler, depending on the &quot;load&quot; of the scheduler. The pulling/pushing behavior of the infoton is called its sign, and it is implemented as the sign of its energy field.</p><p>Mapping the state of the system - as avaiable on individual schedulers - to the signed energy of scheduler infotons is an active research area with some promising results already. Other extensions of the base are also possible.</p><h4 id="Sample-images"><a class="docs-heading-anchor" href="#Sample-images">Sample images</a><a id="Sample-images-1"></a><a class="docs-heading-anchor-permalink" href="#Sample-images" title="Permalink"></a></h4><p><img src="../assets/infoton/sample1.png" alt/> I1: A balanced binary tree of actors spreads out to fill part of the space that is covered by 6 schedulers. Green and red dots are leafs, red meaning the leaf is 90% full or more. Purple dots are inner nodes of the search tree.</p><hr/><p><img src="../assets/infoton/sample4.png" alt/> I2: A different rendering of a scene similar to I1. Orange lines cross scheduler boundary, gray lines don&#39;t.</p><hr/><p><img src="../assets/infoton/sample2.png" alt/> I3: A linked list of 4000 actors spreads out to fill part of the space that is covered by 6 schedulers.</p><hr/><p><img src="../assets/infoton/sample3.png" alt/> I4: A better solution of I3, rendered sightly differently.</p><h4 id="Notes"><a class="docs-heading-anchor" href="#Notes">Notes</a><a id="Notes-1"></a><a class="docs-heading-anchor-permalink" href="#Notes" title="Permalink"></a></h4><p>N1. The limits and applicability of this algorithm is not yet explored, implementation details are not fixed. Quoted terms in the description mark areas of uncertainty.</p><p>N2. The cost of this optimization is a small, constant overhead on every message sent, plus the overhead of actor migration.</p><p>N3. Actors cannot collide in the base model and in the extended one currently implemented in Circo. Multiple actors may be positioned at the exact same place.</p><p>N4. However, domain-specific knowledge or special requirements can be added by sending negative signal messages. E.g. If multiple copies of a piece of data exist in the system for failure tolerance, the copies can preiodically check the liveness of each other while also spread as a result.</p><p>N5. A similar domain mechanism works in the tree example, where neighbour nodes &quot;periodically&quot; ping each other with negative infotons.</p><h4 id="Sample-code"><a class="docs-heading-anchor" href="#Sample-code">Sample code</a><a id="Sample-code-1"></a><a class="docs-heading-anchor-permalink" href="#Sample-code" title="Permalink"></a></h4><p>This is the current default implementation in Circo of how an infoton acts on the target actor. In this version pulling forces are not applied if the distance between the source and the target is too small. This trick seems to lead to better results in some cases. It introduces a metaparameter called <code>TARGET_DISTANCE</code>, and it can be thought of as a rudimentary approximation of a separate force that pushes actors away when they are too close.</p><pre><code class="language-julia">Pos = VecE3{Float32} # 3D coordinates

struct Infoton
    sourcepos::Pos
    energy::Float32 # The sign of this field is called the sign of the Infoton
    Infoton(sourcepos::Pos, energy::Real = 1) = new(sourcepos, Float32(energy))
end

const TARGET_DISTANCE = 15.0

function apply_infoton(space::Space, targetactor::Actor, infoton::Infoton)
    diff = infoton.sourcepos - targetactor.core.pos
    difflen = norm(diff)
    energy = infoton.energy
    if energy &gt; 0 &amp;&amp; difflen &lt; TARGET_DISTANCE
        return nothing
    end
    targetactor.core.pos += diff / difflen * energy
    return nothing
end</code></pre><h4 id="How-to-start-research-on-Infoton-optimization"><a class="docs-heading-anchor" href="#How-to-start-research-on-Infoton-optimization">How to start research on Infoton optimization</a><a id="How-to-start-research-on-Infoton-optimization-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-start-research-on-Infoton-optimization" title="Permalink"></a></h4><p>You can overload <code>apply_infoton</code> and <code>scheduler_infoton</code> for your actor (and/or plugin) types. Actor positioning is implemented as a plugin. All you need to do is to install the system and run the examples where you can tweak the current rudimentary implementation. Please share your findings on Discourse!</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>For simplicity, here I use the actor model to describe the algorithm, but it can be adapted to other concurrency models.</li><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a><a href="https://en.wikipedia.org/wiki/Force-directed_graph_drawing">Force-directed graph drawing in Wikipedia</a></li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial/">« Tutorial</a><a class="docs-footer-nextpage" href="../plugindev/">Plugin development »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.3 on <span class="colophon-date" title="Thursday 8 July 2021 11:56">Thursday 8 July 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
